CREATE TABLE IF NOT EXISTS Students (
    student_id SERIAL PRIMARY KEY, -- Уникальный идентификатор студента
    full_name VARCHAR(255) NOT NULL, -- Полное имя студента
    email VARCHAR(255) UNIQUE NOT NULL, -- Электронная почта студента (должна быть уникальной)
    start_year INT -- Год поступления студента
);

CREATE TABLE IF NOT EXISTS Courses (
    course_id SERIAL PRIMARY KEY, -- Уникальный идентификатор курса
    course_name VARCHAR(255) NOT NULL, -- Название курса
    credits INT CHECK (credits > 0) -- Количество зачетных единиц курса (должно быть больше 0)
);

CREATE TABLE IF NOT EXISTS Enrollments (
    student_id INT REFERENCES Students(student_id) ON DELETE CASCADE, -- Ссылка на ID студента (внешний ключ)
    course_id INT REFERENCES Courses(course_id) ON DELETE CASCADE, -- Ссылка на ID курса (внешний ключ)
    grade CHAR(1), -- Оценка студента за курс (например, 'A', 'B', 'C')
    PRIMARY KEY (student_id, course_id)
);

INSERT INTO Students(full_name, email, start_year) VALUES 
('Алексей Смирнов', 'lexa2012@mail.ru', 2021), 
('Елена Кузнецова', 'superlena@mail.ru', 2022), 
('Дмитрий Новиков', 'CoSmIcHeSkIyUnIcHtOzHiTeL@mail.ru', 2021), 
('Ольга Морозова', 'olechka@mail.ru', 2023);

INSERT INTO Courses(course_name, credits) VALUES 
('Введение в программирование', 5),
('Базы данных', 4),
('Веб-технологии', 4);

INSERT INTO Enrollments(student_id, course_id, grade) VALUES 
(1, 2, 'A'),
(2, 2, 'B'),
(3, 1, null),
(3, 2, null),
(3, 3, null);

UPDATE Students SET email='elena.kuznetsova@newmail.com' WHERE full_name='Елена Кузнецова';
UPDATE Enrollments SET grade='A' WHERE student_id=3 AND course_id=1;

DELETE FROM Students WHERE full_name = 'Ольга Морозова';

Выбрка

SELECT * FROM Students;
SELECT course_name, credits FROM Courses;
SELECT * FROM Students WHERE start_year = 2021;
SELECT * FROM Courses WHERE credits > 4;
SELECT * FROM Students WHERE email = 'elena.kuznetsova@newmail.com';
SELECT * FROM Students WHERE full_name LIKE 'Дмитрий%';
SELECT * FROM Enrollments WHERE grade IS NULL;
SELECT * FROM Courses ORDER BY course_name ASC;
SELECT * FROM Students ORDER BY start_year ASC, full_name ASC;
SELECT * FROM Students ORDER BY start_year ASC LIMIT 2;
