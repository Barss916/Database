CREATE TABLE IF NOT EXISTS authors(
author_id serial PRIMARY KEY,
author_name text NOT NULL
);

CREATE TABLE IF NOT EXISTS books(
book_id serial PRIMARY KEY,
title text NOT NULL,
published_year integer NOT NULL,
author_id integer,
foreign key(author_id) REFERENCES authors(author_id)
);

ALTER TABLE books ADD COLUMN genre varchar(100);
ALTER TABLE books ADD CONSTRAINT published_year CHECK (published_year < 2025);

ALTER TABLE books DROP COLUMN author_id;

CREATE TABLE IF NOT EXISTS authorship(
book_id integer,
author_id integer,
PRIMARY KEY(book_id, author_id),
FOREIGN KEY(book_id) REFERENCES books(book_id),
FOREIGN KEY(author_id) REFERENCES authors(author_id)
);

CREATE TABLE IF NOT EXISTS temp_table(
id serial PRIMARY KEY,
name text not null
);

DROP TABLE temp_table;